{
  "info": {
    "_postman_id": "7ea41e90-9fb4-4906-9961-0c99c104b145",
    "name": "Create XDM 0.9.9.9 Profile Identity Link Dataset using IdentityMap",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Create Profile Schema",
      "item": [
        {
          "name": "Create Profile SCHEMA USING Profile Class",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "47da0211-ab07-460a-bb30-0be8ec0a9a15",
                "exec": [
                  "var json = JSON.parse(responseBody);",
                  "//postman.setEnvironmentVariable(\"TEST\", json.version);",
                  "",
                  "//console.log(json);",
                  "",
                  "var PROFILESCHEMAFULL = json['meta:altId'];",
                  "postman.setEnvironmentVariable(\"PROFILESCHEMAFULL\", PROFILESCHEMAFULL);",
                  "tests[\"PROFILESCHEMAFULL = \" + PROFILESCHEMAFULL] = true; ",
                  "",
                  "var PROFILESCHEMAURL = json.$id;",
                  "postman.setEnvironmentVariable(\"PROFILESCHEMAURL\", PROFILESCHEMAURL);",
                  "tests[\"PROFILESCHEMAURL = \" + PROFILESCHEMAURL] = true; ",
                  "",
                  "var SPLIT_HEADER = PROFILESCHEMAURL.split('/');",
                  "var PROFILESCHEMAID = SPLIT_HEADER[5];",
                  "postman.setEnvironmentVariable(\"PROFILESCHEMAID\", PROFILESCHEMAID);",
                  "tests[\"PROFILESCHEMAID = \" + PROFILESCHEMAID] = true; ",
                  "",
                  "tests[\"Refer to https://wiki.corp.adobe.com/pages/viewpage.action?pageId=1579435795\"] = true    ",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{ACCESS_TOKEN}}"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"object\",\n  \"title\": \"Profile Schema for Identity Linking - IdentityMap case\",\n  \"meta:extensible\": false,\n  \"meta:abstract\": false,\n  \"auditable\": true,\n  \"description\": \"Profile Schema for Identity Linking - IdentityMap case\",\n  \"definitions\": {\n  },\n  \"allOf\": [\n    {\n      \"$ref\": \"https://ns.adobe.com/xdm/context/profile\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/foundation/schemaregistry/tenant/schemas",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": [
                "data",
                "foundation",
                "schemaregistry",
                "tenant",
                "schemas"
              ]
            },
            "description": "Create Customer Schema (target schema) in tenant"
          },
          "response": []
        },
        {
          "name": "Create Profile SCHEMA USING Profile Class Copy",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "47da0211-ab07-460a-bb30-0be8ec0a9a15",
                "exec": [
                  "var json = JSON.parse(responseBody);",
                  "//postman.setEnvironmentVariable(\"TEST\", json.version);",
                  "",
                  "//console.log(json);",
                  "",
                  "var PROFILESCHEMAFULL = json['meta:altId'];",
                  "postman.setEnvironmentVariable(\"PROFILESCHEMAFULL\", PROFILESCHEMAFULL);",
                  "tests[\"PROFILESCHEMAFULL = \" + PROFILESCHEMAFULL] = true; ",
                  "",
                  "var PROFILESCHEMAURL = json.$id;",
                  "postman.setEnvironmentVariable(\"PROFILESCHEMAURL\", PROFILESCHEMAURL);",
                  "tests[\"PROFILESCHEMAURL = \" + PROFILESCHEMAURL] = true; ",
                  "",
                  "var SPLIT_HEADER = PROFILESCHEMAURL.split('/');",
                  "var PROFILESCHEMAID = SPLIT_HEADER[5];",
                  "postman.setEnvironmentVariable(\"PROFILESCHEMAID\", PROFILESCHEMAID);",
                  "tests[\"PROFILESCHEMAID = \" + PROFILESCHEMAID] = true; ",
                  "",
                  "tests[\"Refer to https://wiki.corp.adobe.com/pages/viewpage.action?pageId=1579435795\"] = true    ",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{ACCESS_TOKEN}}"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/vnd.adobe.xed-full-notext+json; version=1.0",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"object\",\n  \"title\": \"Profile Schema for Identity Linking - IdentityMap case\",\n  \"meta:extensible\": false,\n  \"meta:abstract\": false,\n  \"auditable\": true,\n  \"description\": \"Profile Schema for Identity Linking - IdentityMap case\",\n  \"definitions\": {\n  },\n  \"allOf\": [\n    {\n      \"$ref\": \"https://ns.adobe.com/xdm/context/profile\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/foundation/schemaregistry/tenant/schemas/{{PROFILESCHEMAFULL}}",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": [
                "data",
                "foundation",
                "schemaregistry",
                "tenant",
                "schemas",
                "{{PROFILESCHEMAFULL}}"
              ]
            },
            "description": "Create Customer Schema (target schema) in tenant"
          },
          "response": []
        },
        {
          "name": "Create Profile Dataset",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "91bb99e3-9026-44a4-bfd9-ba61e96d9ba0",
                "exec": [
                  "postman.setEnvironmentVariable(\"LOCATIONDATASETFILEID\", postman.getResponseHeader(\"LOCATION\"));",
                  "var LOCATIONDATASETFILEID = postman.getResponseHeader(\"LOCATION\");",
                  "var SPLIT_HEADER = LOCATIONDATASETFILEID.split('/');",
                  "var NEWDATASETFILEID = SPLIT_HEADER[5]",
                  "tests[\"Raw = \" + NEWDATASETFILEID] = true; ",
                  "postman.setEnvironmentVariable(\"NEWPROFILEDATASETID\", SPLIT_HEADER[5]);",
                  "    tests[\"NEWPROFILEDATASETID = \" + NEWDATASETFILEID] = true;   ",
                  "    tests[\"Refer to https://wiki.corp.adobe.com/pages/viewpage.action?pageId=1579435795\"] = true    ",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "requestDataSource",
                "value": "true"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"schemaRef\": {\n      \"id\": \"{{PROFILESCHEMAURL}}\",\n      \"contentType\": \"application/vnd.adobe.xed+json; version=1\"\n   },\n   \"name\": \"Test Profile Schema for Identity Linking\",\n   \"description\": \"Hello World test for Profile Identity Linking\",\n   \"fileDescription\": {\n      \"persisted\": true,\n      \"containerFormat\": \"parquet\",\n      \"format\": \"parquet\"\n   },\n   \"aspect\": \"production\",\n   \"tags\": \n\t{\n           \"unifiedIdentity\": [\"enabled:true\"],\n           \"unifiedProfile\": [\"enabled:true\"]\n\t}\n}"
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/foundation/catalog/dataSets",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": ["data", "foundation", "catalog", "dataSets"]
            }
          },
          "response": []
        },
        {
          "name": "Check Profile Dataset",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "91bb99e3-9026-44a4-bfd9-ba61e96d9ba0",
                "exec": [
                  "postman.setEnvironmentVariable(\"LOCATIONDATASETFILEID\", postman.getResponseHeader(\"LOCATION\"));",
                  "var LOCATIONDATASETFILEID = postman.getResponseHeader(\"LOCATION\");",
                  "var SPLIT_HEADER = LOCATIONDATASETFILEID.split('/');",
                  "var NEWDATASETFILEID = SPLIT_HEADER[5]",
                  "tests[\"Raw = \" + NEWDATASETFILEID] = true; ",
                  "postman.setEnvironmentVariable(\"NEWPROFILEDATASETID\", SPLIT_HEADER[5]);",
                  "    tests[\"NEWPROFILEDATASETID = \" + NEWDATASETFILEID] = true;   ",
                  "    tests[\"Refer to https://wiki.corp.adobe.com/pages/viewpage.action?pageId=1579435795\"] = true    ",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "requestDataSource",
                "value": "true"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"schemaRef\": {\n      \"id\": \"{{PROFILESCHEMAURL}}\",\n      \"contentType\": \"application/vnd.adobe.xed+json; version=1\"\n   },\n   \"name\": \"Test Profile Schema for Identity Linking\",\n   \"description\": \"Hello World test for Profile Identity Linking\",\n   \"fileDescription\": {\n      \"persisted\": true,\n      \"containerFormat\": \"parquet\",\n      \"format\": \"parquet\"\n   },\n   \"aspect\": \"production\",\n   \"tags\": \n\t{\n           \"unifiedIdentity\": [\"enabled:true\"],\n           \"unifiedProfile\": [\"enabled:true\"]\n\t}\n}"
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/foundation/catalog/dataSets/{{NEWPROFILEDATASETID}}",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": [
                "data",
                "foundation",
                "catalog",
                "dataSets",
                "{{NEWPROFILEDATASETID}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Find Profile Dataset",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "91bb99e3-9026-44a4-bfd9-ba61e96d9ba0",
                "exec": [
                  "postman.setEnvironmentVariable(\"LOCATIONDATASETFILEID\", postman.getResponseHeader(\"LOCATION\"));",
                  "var LOCATIONDATASETFILEID = postman.getResponseHeader(\"LOCATION\");",
                  "var SPLIT_HEADER = LOCATIONDATASETFILEID.split('/');",
                  "var NEWDATASETFILEID = SPLIT_HEADER[5]",
                  "tests[\"Raw = \" + NEWDATASETFILEID] = true; ",
                  "postman.setEnvironmentVariable(\"NEWPROFILEDATASETID\", SPLIT_HEADER[5]);",
                  "    tests[\"NEWPROFILEDATASETID = \" + NEWDATASETFILEID] = true;   ",
                  "    tests[\"Refer to https://wiki.corp.adobe.com/pages/viewpage.action?pageId=1579435795\"] = true    ",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "requestDataSource",
                "value": "true"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"schemaRef\": {\n      \"id\": \"{{PROFILESCHEMAURL}}\",\n      \"contentType\": \"application/vnd.adobe.xed+json; version=1\"\n   },\n   \"name\": \"Test Profile Schema for Identity Linking\",\n   \"description\": \"Hello World test for Profile Identity Linking\",\n   \"fileDescription\": {\n      \"persisted\": true,\n      \"containerFormat\": \"parquet\",\n      \"format\": \"parquet\"\n   },\n   \"aspect\": \"production\",\n   \"tags\": \n\t{\n           \"unifiedIdentity\": [\"enabled:true\"],\n           \"unifiedProfile\": [\"enabled:true\"]\n\t}\n}"
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/foundation/catalog/dataSets/?properties=id,name,schema&tags=unifiedIdentity:enabled:true&sort=desc:created",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": ["data", "foundation", "catalog", "dataSets", ""],
              "query": [
                {
                  "key": "properties",
                  "value": "id,name,schema"
                },
                {
                  "key": "tags",
                  "value": "unifiedIdentity:enabled:true"
                },
                {
                  "key": "sort",
                  "value": "desc:created"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Create Experience Event Schema",
      "item": [
        {
          "name": "List Mixins - Global for Experience Event Copy",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "654aa54b-c441-43a2-80bb-76430732593a",
                "exec": [
                  "    tests[\"Refer to https://wiki.corp.adobe.com/pages/viewpage.action?pageId=1579435795\"] = true    ",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{ACCESS_TOKEN}}"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "Accept",
                "value": "application/vnd.adobe.xed-id+json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/foundation/schemaregistry/global/mixins?property=meta:intendedToExtend==https://ns.adobe.com/xdm/context/experienceevent",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": [
                "data",
                "foundation",
                "schemaregistry",
                "global",
                "mixins"
              ],
              "query": [
                {
                  "key": "property",
                  "value": "meta:intendedToExtend==https://ns.adobe.com/xdm/context/experienceevent"
                }
              ]
            },
            "description": "Requests the Customer Schemas (target schemas) from a tenant"
          },
          "response": []
        },
        {
          "name": "Create Experience Event SCHEMA USING ExperienceEvent Class",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "47da0211-ab07-460a-bb30-0be8ec0a9a15",
                "exec": [
                  "var json = JSON.parse(responseBody);",
                  "//postman.setEnvironmentVariable(\"TEST\", json.version);",
                  "",
                  "//console.log(json);",
                  "",
                  "var EXPEVENTSCHEMAFULL = json['meta:altId'];",
                  "postman.setEnvironmentVariable(\"EXPEVENTSCHEMAFULL\", EXPEVENTSCHEMAFULL);",
                  "tests[\"EXPEVENTSCHEMAFULL = \" + EXPEVENTSCHEMAFULL] = true; ",
                  "",
                  "var EXPEVENTSCHEMAURL = json.$id;",
                  "postman.setEnvironmentVariable(\"EXPEVENTSCHEMAURL\", EXPEVENTSCHEMAURL);",
                  "tests[\"EXPEVENTSCHEMAURL = \" + EXPEVENTSCHEMAURL] = true; ",
                  "",
                  "var SPLIT_HEADER = EXPEVENTSCHEMAURL.split('/');",
                  "var EXPEVENTSCHEMAID = SPLIT_HEADER[5];",
                  "postman.setEnvironmentVariable(\"EXPEVENTSCHEMAID\", EXPEVENTSCHEMAID);",
                  "tests[\"EXPEVENTSCHEMAID = \" + EXPEVENTSCHEMAID] = true; ",
                  "",
                  "    tests[\"Refer to https://wiki.corp.adobe.com/pages/viewpage.action?pageId=1579435795\"] = true    ",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{ACCESS_TOKEN}}"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"object\",\n  \"title\": \"ExperienceEvent Schema for Identity Linking - IdentityMap case #2\",\n  \"meta:extensible\": false,\n  \"meta:abstract\": false,\n  \"auditable\": true,\n  \"description\": \"ExperienceEvent Schema for Identity Linking - IdentityMap case\",\n  \"definitions\": {\n  },\n  \"allOf\": [\n    {\n      \"$ref\": \"https://ns.adobe.com/xdm/context/experienceevent\"\n    },\n    {\n      \"$ref\": \"https://ns.adobe.com/xdm/context/experienceevent-marketing\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/foundation/schemaregistry/tenant/schemas",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": [
                "data",
                "foundation",
                "schemaregistry",
                "tenant",
                "schemas"
              ]
            },
            "description": "Create Customer Schema (target schema) in tenant"
          },
          "response": []
        },
        {
          "name": "Create Experience Event Dataset",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "91bb99e3-9026-44a4-bfd9-ba61e96d9ba0",
                "exec": [
                  "postman.setEnvironmentVariable(\"LOCATIONDATASETFILEID\", postman.getResponseHeader(\"LOCATION\"));",
                  "var LOCATIONDATASETFILEID = postman.getResponseHeader(\"LOCATION\");",
                  "var SPLIT_HEADER = LOCATIONDATASETFILEID.split('/');",
                  "var NEWDATASETFILEID = SPLIT_HEADER[5]",
                  "tests[\"Raw = \" + NEWDATASETFILEID] = true; ",
                  "postman.setEnvironmentVariable(\"NEWEXPEVENTDATASETID\", SPLIT_HEADER[5]);",
                  "    tests[\"NEWEXPEVENTDATASETID = \" + NEWDATASETFILEID] = true;      ",
                  "tests[\"Refer to https://wiki.corp.adobe.com/pages/viewpage.action?pageId=1579435795\"] = true    ",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "requestDataSource",
                "value": "true"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n   \"schemaRef\": {\n      \"id\": \"{{EXPEVENTSCHEMAFULL}}\",\n      \"contentType\": \"application/vnd.adobe.xed+json; version=1\"\n   },\n   \"name\": \"Test Experience Event Schema for Identity Linking\",\n   \"description\": \"Hello World test for Profile Identity Linking\",\n   \"fileDescription\": {\n      \"persisted\": true,\n      \"containerFormat\": \"parquet\",\n      \"format\": \"parquet\"\n   },\n   \"aspect\": \"production\",\n   \"tags\": \n\t{\n           \"unifiedIdentity\": [\"enabled:true\"],\n           \"unifiedProfile\": [\"enabled:true\"]\n\t}\n}"
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/foundation/catalog/dataSets",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": ["data", "foundation", "catalog", "dataSets"]
            }
          },
          "response": []
        },
        {
          "name": "Check ExperienceEvent Dataset",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "47da0211-ab07-460a-bb30-0be8ec0a9a15",
                "exec": [
                  "var json = JSON.parse(responseBody);",
                  "//postman.setEnvironmentVariable(\"TEST\", json.version);",
                  "",
                  "//console.log(json);",
                  "",
                  "var EXPEVENTSCHEMAFULL = json['meta:altId'];",
                  "postman.setEnvironmentVariable(\"EXPEVENTSCHEMAFULL\", EXPEVENTSCHEMAFULL);",
                  "tests[\"EXPEVENTSCHEMAFULL = \" + EXPEVENTSCHEMAFULL] = true; ",
                  "",
                  "var EXPEVENTSCHEMAURL = json.$id;",
                  "postman.setEnvironmentVariable(\"EXPEVENTSCHEMAURL\", EXPEVENTSCHEMAURL);",
                  "tests[\"EXPEVENTSCHEMAURL = \" + EXPEVENTSCHEMAURL] = true; ",
                  "",
                  "var SPLIT_HEADER = EXPEVENTSCHEMAURL.split('/');",
                  "var EXPEVENTSCHEMAID = SPLIT_HEADER[5];",
                  "postman.setEnvironmentVariable(\"EXPEVENTSCHEMAID\", EXPEVENTSCHEMAID);",
                  "tests[\"EXPEVENTSCHEMAID = \" + EXPEVENTSCHEMAID] = true; ",
                  "",
                  "    tests[\"Refer to https://wiki.corp.adobe.com/pages/viewpage.action?pageId=1579435795\"] = true    ",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{ACCESS_TOKEN}}"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/vnd.adobe.xed-full-notext+json; version=1.0",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"object\",\n  \"title\": \"ExperienceEvent Schema for Identity Linking - IdentityMap case #2\",\n  \"meta:extensible\": false,\n  \"meta:abstract\": false,\n  \"auditable\": true,\n  \"description\": \"ExperienceEvent Schema for Identity Linking - IdentityMap case\",\n  \"definitions\": {\n  },\n  \"allOf\": [\n    {\n      \"$ref\": \"https://ns.adobe.com/xdm/context/experienceevent\"\n    },\n    {\n      \"$ref\": \"https://ns.adobe.com/xdm/context/experienceevent-marketing\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/foundation/schemaregistry/tenant/schemas/{{EXPEVENTSCHEMAFULL}}",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": [
                "data",
                "foundation",
                "schemaregistry",
                "tenant",
                "schemas",
                "{{EXPEVENTSCHEMAFULL}}"
              ]
            },
            "description": "Create Customer Schema (target schema) in tenant"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Create Identity",
      "item": [
        {
          "name": "Get Identities Available",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a23b558f-bd67-4fa6-8984-57df74154b92",
                "type": "text/javascript",
                "exec": [
                  "var json = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"ACCESS_TOKEN\", json.ACCESS_TOKEN);"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/core/idnamespace/identities/",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": ["data", "core", "idnamespace", "identities", ""]
            }
          },
          "response": []
        },
        {
          "name": "Create Custom Identity - IF NECESSARY",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "1cc670cc-972c-486e-af78-e9ce4907b816",
                "exec": [
                  "var json = JSON.parse(responseBody);",
                  "//postman.setEnvironmentVariable(\"ACCESS_TOKEN\", json.ACCESS_TOKEN);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "warning": "This is a duplicate header and will be overridden by the Authorization header generated by Postman.",
                "key": "Authorization",
                "value": "Bearer {{ACCESS_TOKEN}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"shared\": false,\n  \"description\": \"\",\n  \"idType\": \"COOKIE\",\n  \"code\": \"CRMID\",\n  \"name\": \"Customer Relationship Id\"\n}"
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/core/idnamespace/identities/",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": ["data", "core", "idnamespace", "identities", ""]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Create Streaming Endpoint",
      "item": [
        {
          "name": "Streaming - Requesting a Streaming Endpoint IF NECESSARY",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "8b22db6e-d413-46ea-ac4f-7f8b2a5ab5fb",
                "exec": [
                  "var json = JSON.parse(responseBody);",
                  "",
                  "//for(var firstKey in json);",
                  "//    postman.setEnvironmentVariable(\"FIRST_KEY\", firstKey);",
                  "    postman.setEnvironmentVariable(\"STREAMINGENDPOINTID\", json.streamingEndpointId);",
                  "    tests[\"STREAMINGENDPOINTID = \" + json.streamingEndpointId] = true;",
                  "    postman.setEnvironmentVariable(\"STREAMINGENDPOINTID\", json.status);",
                  "    tests[\"STATUS = \" + json.status] = true;",
                  "    tests[\"IMS Org = \" + json.imsOrg] = true; ",
                  "    tests[\"Refer to https://wiki.corp.adobe.com/display/DMSArchitecture/Getting+Started+with+Platform+Streaming+Ingestion+APIs#GettingStartedwithPlatformStreamingIngestionAPIs-RequestingaStreamingEndpoint for more info\"] = true"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{ACCESS_TOKEN}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\" : \"ACPE2ETesting\",\r\n    \"description\" : \"ACPE2ETesting\",\r\n    \"sourceId\" : \"ACPE2ETesting\",\r\n    \"dataType\": \"xdm\"\r\n}"
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/core/edge/inlet",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": ["data", "core", "edge", "inlet"]
            }
          },
          "response": []
        },
        {
          "name": "Streaming - Check Streaming Endpoint",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "9410c04a-06ae-4067-867b-d1e205248399",
                "exec": [
                  "var json = JSON.parse(responseBody);",
                  "",
                  "//for(var firstKey in json);",
                  "//    postman.setEnvironmentVariable(\"FIRST_KEY\", firstKey);",
                  "    postman.setEnvironmentVariable(\"STREAMINGENDPOINTID\", json.id);",
                  "    tests[\"STREAMINGENDPOINTID = \" + json.id] = true;",
                  "    postman.setEnvironmentVariable(\"STREAMINGENDPOINTID\", json.status);",
                  "    tests[\"STATUS = \" + json.status] = true;",
                  "    tests[\"IMS Org = \" + json.imsOrg] = true; "
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{ACCESS_TOKEN}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/core/edge/inlet/{{STREAMINGENDPOINTID}}",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": [
                "data",
                "core",
                "edge",
                "inlet",
                "{{STREAMINGENDPOINTID}}"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Load Bulk Ingest Data - Profile and Exp Event",
      "item": [
        {
          "name": "Create CRMID to ECID MAPPING Batch for Profile Dataset Copy",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "f22719b2-bf74-426a-8809-3b5230b5edf9",
                "exec": [
                  "var json = JSON.parse(responseBody);",
                  "",
                  "//for(var firstKey in json);",
                  "//    postman.setEnvironmentVariable(\"FIRST_KEY\", firstKey);",
                  "    postman.setEnvironmentVariable(\"MAPPINGBATCHID\", json.id);",
                  "    tests[\"MAPPINGBATCHID = \" + json.id] = true;",
                  "    postman.setEnvironmentVariable(\"MAPPINGBATCHSTATUS\", json.status);",
                  "    tests[\"STATUS = \" + json.status] = true;",
                  "    tests[\"IMS Org = \" + json.imsOrg] = true; ",
                  "",
                  "",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"datasetId\":\"{{NEWPROFILEDATASETID}}\"}"
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/foundation/import/batches",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": ["data", "foundation", "import", "batches"]
            }
          },
          "response": []
        },
        {
          "name": "Upload CRMID to ECID MAPPING to Profile Dataset Copy",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "6adf9ed4-5f91-4ce0-aed2-a64edf91f6aa",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "//var json = JSON.parse(responseBody);",
                  "",
                  "//for(var firstKey in json);",
                  "//    postman.setEnvironmentVariable(\"FIRST_KEY\", firstKey);",
                  "//    postman.setEnvironmentVariable(\"LASTBATCHID\", json[firstKey].lastBatchId);",
                  "//    tests[\"Last Batch ID = \" + firstKey] = true;              // debug message",
                  "//    tests[\"dataSet Name = \" + json[firstKey].name] = true; ",
                  "//    tests[\"IMS Org = \" + json[firstKey].imsOrg] = true; ",
                  "//    tests[\"Batch Status = \" + json[firstKey].status] = true; ",
                  "//    tests[\"Last Batch Status = \" + json[firstKey].lastBatchStatus] = true; ",
                  "//    tests[\"Last Batch Success = \" + json[firstKey].lastSuccessfulBatch] = true; "
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/octet-stream"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              }
            ],
            "body": {
              "mode": "file",
              "file": {}
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/foundation/import/batches/{{MAPPINGBATCHID}}/datasets/{{NEWPROFILEDATASETID}}/files/out.parquet",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": [
                "data",
                "foundation",
                "import",
                "batches",
                "{{MAPPINGBATCHID}}",
                "datasets",
                "{{NEWPROFILEDATASETID}}",
                "files",
                "out.parquet"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Signal CRMID to ECID MAPPING Profile Batches for Completion Copy",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "1d7dd2ce-9c47-4d1f-b5f5-81b2c890b13d",
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "//var json = JSON.parse(responseBody);",
                  "",
                  "//for(var firstKey in json);",
                  "//    postman.setEnvironmentVariable(\"FIRST_KEY\", firstKey);",
                  "//    postman.setEnvironmentVariable(\"NEWBATCHID\", json.id);",
                  "//    tests[\"NEWBATCHID = \" + json.id] = true;",
                  "//    postman.setEnvironmentVariable(\"NEWBATCHSTATUS\", json.status);",
                  "//    tests[\"STATUS = \" + json.status] = true;",
                  "//    tests[\"IMS Org = \" + json.imsOrg] = true; ",
                  "",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/foundation/import/batches/{{MAPPINGBATCHID}}?action=COMPLETE",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": [
                "data",
                "foundation",
                "import",
                "batches",
                "{{MAPPINGBATCHID}}"
              ],
              "query": [
                {
                  "key": "action",
                  "value": "COMPLETE"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Check MAPPING Profile Batch Status Copy",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "1570063e-ea92-4ef3-a6b0-3a7243c5fb47",
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "var json = JSON.parse(responseBody);",
                  "",
                  "for(var firstKey in json);",
                  "    postman.setEnvironmentVariable(\"CHECK_BATCH_ID\", json[firstKey]);",
                  "    tests[\"CHECK_BATCH_ID = \" + firstKey] = true;",
                  "    postman.setEnvironmentVariable(\"NEWBATCHSTATUS\", json[firstKey].status);",
                  "    tests[\"STATUS = \" + json[firstKey].status] = true;",
                  "    tests[\"IMS Org = \" + json[firstKey].imsOrg] = true; ",
                  "",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/foundation/catalog/batches/{{MAPPINGBATCHID}}",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": [
                "data",
                "foundation",
                "catalog",
                "batches",
                "{{MAPPINGBATCHID}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Check Profile Dataset Status Copy",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "1570063e-ea92-4ef3-a6b0-3a7243c5fb47",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "var json = JSON.parse(responseBody);",
                  "",
                  "for(var firstKey in json);",
                  "    postman.setEnvironmentVariable(\"CHECK_BATCH_ID\", json[firstKey]);",
                  "    tests[\"CHECK_BATCH_ID = \" + firstKey] = true;",
                  "    postman.setEnvironmentVariable(\"NEWBATCHSTATUS\", json[firstKey].status);",
                  "    tests[\"STATUS = \" + json[firstKey].status] = true;",
                  "    tests[\"IMS Org = \" + json[firstKey].imsOrg] = true; ",
                  "",
                  "",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/foundation/catalog/batches={{MAPPINGBATCHID}}",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": [
                "data",
                "foundation",
                "catalog",
                "batches={{MAPPINGBATCHID}}"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Load Streaming Data - Profile and Exp Event",
      "item": [
        {
          "name": "Streaming - Profile Ingest - 3 records in IdentityMap",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"header\": {\n        \"msgType\": \"xdmEntityCreate\",\n        \"msgVersion\": \"1.0\",\n        \"msgId\": \"123456\",\n        \"xdmSchema\": {\n            \"name\": \"{{PROFILESCHEMAFULL}}\",\n            \"namespace\": \"\",\n            \"version\": \"1.0\"\n        },\n        \"imsOrgId\": \"{{IMS_ORG}}\",\n        \"source\": {\n            \"name\": \"GettingStarted\",\n            \"id\": \"999999\"\n        },\n        \"eventType\": \"mobile_interaction\",\n        \"action\": \"update\",\n        \"createdAt\": \"1524467240\",\n        \"datasetId\": \"{{NEWPROFILEDATASETID}}\"\n    },\n    \"body\": {\n        \"xdmMeta\": {\n            \"xdmSchema\": {\n                \"name\": \"{{PROFILESCHEMAFULL}}\",\n                \"version\": \"1.0\"\n            }\n        },\n        \"xdmEntity\": {\n            \"_id\": \"0112233445599\",\n            \n            \"identityMap\": \n            \t{\n    \t\t\t\"ECID\": [\n        \t\t\t{\n            \t\t\"id\": \"100000000000000000000000201902070207SS\"\n        \t\t\t}\n    \t\t\t],\n\t\t\t\t\"EMAIL\": [\n        \t\t\t{\n            \t\t\"id\": \"sherkhan@adobe.com\"\n        \t\t\t}\n    \t\t\t],\n    \t\t\t\"CRMID\": [\n        \t\t\t{\n            \t\t\"id\": \"yabadaba\"\n        \t\t\t}\n    \t\t\t]\n\t\t\t\t}\n        }\n    }\n}"
            },
            "url": {
              "raw": "https://dcs-stg.data.adobe.net/collection/{{STREAMINGENDPOINTID}}",
              "protocol": "https",
              "host": ["dcs-stg", "data", "adobe", "net"],
              "path": ["collection", "{{STREAMINGENDPOINTID}}"]
            }
          },
          "response": []
        },
        {
          "name": "Streaming - Profile Ingest - 1 Email record in IdentityMap",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"header\": {\n        \"msgType\": \"xdmEntityCreate\",\n        \"msgVersion\": \"1.0\",\n        \"msgId\": \"123456\",\n        \"xdmSchema\": {\n            \"name\": \"{{PROFILESCHEMAFULL}}\",\n            \"namespace\": \"\",\n            \"version\": \"1.0\"\n        },\n        \"imsOrgId\": \"{{IMS_ORG}}\",\n        \"source\": {\n            \"name\": \"GettingStarted\",\n            \"id\": \"999999\"\n        },\n        \"eventType\": \"mobile_interaction\",\n        \"action\": \"update\",\n        \"createdAt\": \"1524467240\",\n        \"datasetId\": \"{{NEWPROFILEDATASETID}}\"\n    },\n    \"body\": {\n        \"xdmMeta\": {\n            \"xdmSchema\": {\n                \"name\": \"{{PROFILESCHEMAFULL}}\",\n                \"version\": \"1.0\"\n            }\n        },\n        \"xdmEntity\": {\n            \"_id\": \"0112233445598\",\n            \n            \"identityMap\": \n            \t{\n    \t\t\t\"EMAIL\": [\n        \t\t\t{\n            \t\t\"id\": \"sherkhan2@adobe.com\"\n        \t\t\t}\n    \t\t\t]\n\t\t\t\t}\n        }\n    }\n}"
            },
            "url": {
              "raw": "https://dcs-stg.data.adobe.net/collection/{{STREAMINGENDPOINTID}}",
              "protocol": "https",
              "host": ["dcs-stg", "data", "adobe", "net"],
              "path": ["collection", "{{STREAMINGENDPOINTID}}"]
            }
          },
          "response": []
        },
        {
          "name": "Streaming - Profile Ingest - 1 CRMID record in IdentityMap",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"header\": {\n        \"msgType\": \"xdmEntityCreate\",\n        \"msgVersion\": \"1.0\",\n        \"msgId\": \"123456\",\n        \"xdmSchema\": {\n            \"name\": \"{{PROFILESCHEMAFULL}}\",\n            \"namespace\": \"\",\n            \"version\": \"1.0\"\n        },\n        \"imsOrgId\": \"{{IMS_ORG}}\",\n        \"source\": {\n            \"name\": \"GettingStarted\",\n            \"id\": \"999999\"\n        },\n        \"eventType\": \"mobile_interaction\",\n        \"action\": \"update\",\n        \"createdAt\": \"1524467240\",\n        \"datasetId\": \"{{NEWPROFILEDATASETID}}\"\n    },\n    \"body\": {\n        \"xdmMeta\": {\n            \"xdmSchema\": {\n                \"name\": \"{{PROFILESCHEMAFULL}}\",\n                \"version\": \"1.0\"\n            }\n        },\n        \"xdmEntity\": {\n            \"_id\": \"0112233445597\",\n            \n            \"identityMap\": \n            \t{\n    \t\t\t\"CRMID\": [\n        \t\t\t{\n            \t\t\"id\": \"yabadaba2\"\n        \t\t\t}\n    \t\t\t]\n\t\t\t\t}\n        }\n    }\n}"
            },
            "url": {
              "raw": "https://dcs-stg.data.adobe.net/collection/{{STREAMINGENDPOINTID}}",
              "protocol": "https",
              "host": ["dcs-stg", "data", "adobe", "net"],
              "path": ["collection", "{{STREAMINGENDPOINTID}}"]
            }
          },
          "response": []
        },
        {
          "name": "Streaming - Profile Ingest - 1 ECID record in IdentityMap",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"header\": {\n        \"msgType\": \"xdmEntityCreate\",\n        \"msgVersion\": \"1.0\",\n        \"msgId\": \"123456\",\n        \"xdmSchema\": {\n            \"name\": \"{{PROFILESCHEMAFULL}}\",\n            \"namespace\": \"\",\n            \"version\": \"1.0\"\n        },\n        \"imsOrgId\": \"{{IMS_ORG}}\",\n        \"source\": {\n            \"name\": \"GettingStarted\",\n            \"id\": \"999999\"\n        },\n        \"eventType\": \"mobile_interaction\",\n        \"action\": \"update\",\n        \"createdAt\": \"1524467240\",\n        \"datasetId\": \"{{NEWPROFILEDATASETID}}\"\n    },\n    \"body\": {\n        \"xdmMeta\": {\n            \"xdmSchema\": {\n                \"name\": \"{{PROFILESCHEMAFULL}}\",\n                \"version\": \"1.0\"\n            }\n        },\n        \"xdmEntity\": {\n            \"_id\": \"0112233445596\",\n            \n            \"identityMap\": \n            \t{\n    \t\t\t\"ECID\": [\n        \t\t\t{\n            \t\t\"id\": \"200000000000000000000000201902070207SS\"\n        \t\t\t}\n    \t\t\t]\n\t\t\t\t}\n        }\n    }\n}"
            },
            "url": {
              "raw": "https://dcs-stg.data.adobe.net/collection/{{STREAMINGENDPOINTID}}",
              "protocol": "https",
              "host": ["dcs-stg", "data", "adobe", "net"],
              "path": ["collection", "{{STREAMINGENDPOINTID}}"]
            }
          },
          "response": []
        },
        {
          "name": "Streaming - ExpEvent Ingest CRM ID Biased - ADVANCED LOOKUP",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"header\": {\n    \"msgType\": \"xdmEntityCreate\",\n    \"msgVersion\": \"1.0\",\n    \"xdmSchema\": {\n      \"name\": \"{{EXPEVENTSCHEMAFULL}}\",\n      \"namespace\": \"\",\n      \"version\": \"1.0\"\n    },\n    \"imsOrgId\": \"{{IMS_ORG}}\",\n    \"source\": {\n      \"name\": \"GettingStarted\",\n      \"id\": \"999999\"\n    },\n    \"eventType\": \"mobile_interaction\",\n    \"action\": \"update\",\n    \"createdAt\": \"1524467240\",\n    \"datasetId\": \"{{NEWEXPEVENTDATASETID}}\"\n  },\n  \"body\": {\n    \"xdmMeta\": {\n      \"xdmSchema\": {\n        \"name\": \"{{EXPEVENTSCHEMAFULL}}\",\n        \"version\": \"1.0\"\n      }\n    },\n    \"xdmEntity\": {\n       \"identityMap\": \n            \t{\n    \t\t\t\"CRMID\": [\n        \t\t\t{\n            \t\t\"id\": \"yabadaba\"\n        \t\t\t}\n    \t\t\t]\n\t\t\t\t},\n      \"_id\": \"231\",\n      \"timestamp\": \"2019-02-06T18:23:32Z\",\n      \"marketing\" : {\n    \t\"trackingCode\" : \"pink\"\n\t\t}\n    }\n  }\n}"
            },
            "url": {
              "raw": "https://dcs-stg.data.adobe.net/collection/40dd51e4fd78f44240bf38db74395ff39e14793ea912551d340d65ea1afb0ad3",
              "protocol": "https",
              "host": ["dcs-stg", "data", "adobe", "net"],
              "path": [
                "collection",
                "40dd51e4fd78f44240bf38db74395ff39e14793ea912551d340d65ea1afb0ad3"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Streaming - ExpEvent Ingest Email Biased - ADVANCED LOOKUP",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"header\": {\n    \"msgType\": \"xdmEntityCreate\",\n    \"msgVersion\": \"1.0\",\n    \"xdmSchema\": {\n      \"name\": \"_xdm.context.experienceEvent\",\n      \"namespace\": \"\",\n      \"version\": \"1.0\"\n    },\n    \"imsOrgId\": \"{{IMS_ORG}}\",\n    \"source\": {\n      \"name\": \"GettingStarted\",\n      \"id\": \"999999\"\n    },\n    \"eventType\": \"mobile_interaction\",\n    \"action\": \"update\",\n    \"createdAt\": \"1524467240\",\n    \"datasetId\": \"{{NEWEXPEVENTDATASETID}}\"\n  },\n  \"body\": {\n    \"xdmMeta\": {\n      \"xdmSchema\": {\n        \"name\": \"_xdm.context.experienceEvent\",\n        \"version\": \"1.0\"\n      }\n    },\n    \"xdmEntity\": {\n      \"identityMap\": \n            \t{\n\t\t\t\t\"EMAIL\": [\n        \t\t\t{\n            \t\t\"id\": \"sherkhan@adobe.com\"\n        \t\t\t}\n    \t\t\t]\n\t\t\t\t},\n      \"_id\": \"131\",\n      \"timestamp\": \"2019-02-06T18:23:32Z\",\n      \"marketing\" : {\n    \t\"trackingCode\" : \"orange\"\n\t\t}\n    }\n  }\n}"
            },
            "url": {
              "raw": "https://dcs-stg.data.adobe.net/collection/{{STREAMINGENDPOINTID}}",
              "protocol": "https",
              "host": ["dcs-stg", "data", "adobe", "net"],
              "path": ["collection", "{{STREAMINGENDPOINTID}}"]
            }
          },
          "response": []
        },
        {
          "name": "Streaming - ExpEvent Ingest ECID Biased - ADVANCED LOOKUP",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"header\": {\n    \"msgType\": \"xdmEntityCreate\",\n    \"msgVersion\": \"1.0\",\n    \"xdmSchema\": {\n      \"name\": \"_xdm.context.experienceEvent\",\n      \"namespace\": \"\",\n      \"version\": \"1.0\"\n    },\n    \"imsOrgId\": \"{{IMS_ORG}}\",\n    \"source\": {\n      \"name\": \"GettingStarted\",\n      \"id\": \"999999\"\n    },\n    \"eventType\": \"mobile_interaction\",\n    \"action\": \"update\",\n    \"createdAt\": \"1524467240\",\n    \"datasetId\": \"{{NEWEXPEVENTDATASETID}}\"\n  },\n  \"body\": {\n    \"xdmMeta\": {\n      \"xdmSchema\": {\n        \"name\": \"_xdm.context.experienceEvent\",\n        \"version\": \"1.0\"\n      }\n    },\n    \"xdmEntity\": {\n       \"identityMap\": \n            \t{\n    \t\t\t\"ECID\": [\n        \t\t\t{\n            \t\t\"id\": \"100000000000000000000000201902070207SS\"\n        \t\t\t}\n    \t\t\t]\n\t\t\t\t},\n      \"_id\": \"031\",\n      \"timestamp\": \"2019-02-06T18:23:32Z\",\n      \"marketing\" : {\n    \t\"trackingCode\" : \"purple\"\n\t\t}\n    }\n  }\n}"
            },
            "url": {
              "raw": "https://dcs-stg.data.adobe.net/collection/{{STREAMINGENDPOINTID}}",
              "protocol": "https",
              "host": ["dcs-stg", "data", "adobe", "net"],
              "path": ["collection", "{{STREAMINGENDPOINTID}}"]
            }
          },
          "response": []
        },
        {
          "name": "Check ExpEvent Dataset Status",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "1570063e-ea92-4ef3-a6b0-3a7243c5fb47",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "var json = JSON.parse(responseBody);",
                  "",
                  "for(var firstKey in json);",
                  "    postman.setEnvironmentVariable(\"CHECK_BATCH_ID\", json[firstKey]);",
                  "    tests[\"CHECK_BATCH_ID = \" + firstKey] = true;",
                  "    postman.setEnvironmentVariable(\"NEWBATCHSTATUS\", json[firstKey].status);",
                  "    tests[\"STATUS = \" + json[firstKey].status] = true;",
                  "    tests[\"IMS Org = \" + json[firstKey].imsOrg] = true; ",
                  "",
                  "",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/foundation/catalog/dataset/{{NEWEXPEVENTDATASETID}}",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": [
                "data",
                "foundation",
                "catalog",
                "dataset",
                "{{NEWEXPEVENTDATASETID}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Check Profile Dataset Status",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "1570063e-ea92-4ef3-a6b0-3a7243c5fb47",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "var json = JSON.parse(responseBody);",
                  "",
                  "for(var firstKey in json);",
                  "    postman.setEnvironmentVariable(\"CHECK_BATCH_ID\", json[firstKey]);",
                  "    tests[\"CHECK_BATCH_ID = \" + firstKey] = true;",
                  "    postman.setEnvironmentVariable(\"NEWBATCHSTATUS\", json[firstKey].status);",
                  "    tests[\"STATUS = \" + json[firstKey].status] = true;",
                  "    tests[\"IMS Org = \" + json[firstKey].imsOrg] = true; ",
                  "",
                  "",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/foundation/catalog/dataset/{{NEWPROFILEDATASETID}}",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": [
                "data",
                "foundation",
                "catalog",
                "dataset",
                "{{NEWPROFILEDATASETID}}"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Lookup Service - Profile and Exp Events",
      "item": [
        {
          "name": "Lookup Service Profile via ECID",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a23b558f-bd67-4fa6-8984-57df74154b92",
                "exec": [
                  "var json = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"ACCESS_TOKEN\", json.ACCESS_TOKEN);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/core/ups/access/entities?schema.name=_xdm.context.profile&entityId=100000000000000000000000201902070207SS&entityIdNS=ECID&limit=10",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": ["data", "core", "ups", "access", "entities"],
              "query": [
                {
                  "key": "schema.name",
                  "value": "_xdm.context.profile"
                },
                {
                  "key": "relatedSchema.name",
                  "value": "_xdm.context.profile",
                  "disabled": true
                },
                {
                  "key": "entityId",
                  "value": "100000000000000000000000201902070207SS"
                },
                {
                  "key": "entityIdNS",
                  "value": "ECID"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Lookup Service ExpEvents ECID",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a23b558f-bd67-4fa6-8984-57df74154b92",
                "exec": [
                  "var json = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"ACCESS_TOKEN\", json.ACCESS_TOKEN);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/core/ups/access/entities?schema.name=_xdm.context.experienceevent&relatedSchema.name=_xdm.context.profile&relatedEntityId=100000000000000000000000201902070207SS&relatedEntityIdNS=ECID&limit=10",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": ["data", "core", "ups", "access", "entities"],
              "query": [
                {
                  "key": "schema.name",
                  "value": "_xdm.context.experienceevent"
                },
                {
                  "key": "relatedSchema.name",
                  "value": "_xdm.context.profile"
                },
                {
                  "key": "relatedEntityId",
                  "value": "100000000000000000000000201902070207SS"
                },
                {
                  "key": "relatedEntityIdNS",
                  "value": "ECID"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Lookup Service Profile CRMID",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a23b558f-bd67-4fa6-8984-57df74154b92",
                "exec": [
                  "var json = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"ACCESS_TOKEN\", json.ACCESS_TOKEN);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/core/ups/access/entities?schema.name=_xdm.context.profile&EntityId=yabadaba&EntityIdNS=CRMID",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": ["data", "core", "ups", "access", "entities"],
              "query": [
                {
                  "key": "schema.name",
                  "value": "_xdm.context.profile"
                },
                {
                  "key": "relatedSchema.name",
                  "value": "_xdm.context.profile",
                  "disabled": true
                },
                {
                  "key": "EntityId",
                  "value": "yabadaba"
                },
                {
                  "key": "EntityIdNS",
                  "value": "CRMID"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Lookup Service ExpEvent CRMID",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a23b558f-bd67-4fa6-8984-57df74154b92",
                "exec": [
                  "var json = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"ACCESS_TOKEN\", json.ACCESS_TOKEN);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/core/ups/access/entities?schema.name=_xdm.context.experienceevent&relatedSchema.name=_xdm.context.profile&relatedEntityId=yabadaba&relatedEntityIdNS=CRMID",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": ["data", "core", "ups", "access", "entities"],
              "query": [
                {
                  "key": "schema.name",
                  "value": "_xdm.context.experienceevent"
                },
                {
                  "key": "relatedSchema.name",
                  "value": "_xdm.context.profile"
                },
                {
                  "key": "relatedEntityId",
                  "value": "yabadaba"
                },
                {
                  "key": "relatedEntityIdNS",
                  "value": "CRMID"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Lookup Service Profile Email",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a23b558f-bd67-4fa6-8984-57df74154b92",
                "exec": [
                  "var json = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"ACCESS_TOKEN\", json.ACCESS_TOKEN);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/core/ups/access/entities?schema.name=_xdm.context.experienceevent&entityId=sherkhan@yahoo.com&entityIdNS=Email",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": ["data", "core", "ups", "access", "entities"],
              "query": [
                {
                  "key": "schema.name",
                  "value": "_xdm.context.experienceevent"
                },
                {
                  "key": "relatedSchema.name",
                  "value": "_xdm.context.profile",
                  "disabled": true
                },
                {
                  "key": "entityId",
                  "value": "sherkhan@yahoo.com"
                },
                {
                  "key": "entityIdNS",
                  "value": "Email"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Lookup Service ExpEvent Email",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a23b558f-bd67-4fa6-8984-57df74154b92",
                "type": "text/javascript",
                "exec": [
                  "var json = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"ACCESS_TOKEN\", json.ACCESS_TOKEN);"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/core/ups/access/entities?schema.name=_xdm.context.experienceevent&relatedSchema.name=_xdm.context.profile&relatedEntityId=sherkhan@yahoo.com&relatedEntityIdNS=Email",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": ["data", "core", "ups", "access", "entities"],
              "query": [
                {
                  "key": "schema.name",
                  "value": "_xdm.context.experienceevent"
                },
                {
                  "key": "relatedSchema.name",
                  "value": "_xdm.context.profile"
                },
                {
                  "key": "relatedEntityId",
                  "value": "sherkhan@yahoo.com"
                },
                {
                  "key": "relatedEntityIdNS",
                  "value": "Email"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "User Graph - Check Identity Service",
      "item": [
        {
          "name": "Identity Service CRMID mapping",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a23b558f-bd67-4fa6-8984-57df74154b92",
                "type": "text/javascript",
                "exec": [
                  "var json = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"ACCESS_TOKEN\", json.ACCESS_TOKEN);"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{ACCESS_TOKEN}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/core/identity/cluster/members?id=abcdef&nsid=85919",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": ["data", "core", "identity", "cluster", "members"],
              "query": [
                {
                  "key": "id",
                  "value": "abcdef"
                },
                {
                  "key": "nsid",
                  "value": "85919"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Identity Service ECID mapping",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a23b558f-bd67-4fa6-8984-57df74154b92",
                "exec": [
                  "var json = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"ACCESS_TOKEN\", json.ACCESS_TOKEN);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/core/identity/cluster/members?id=100000000000000000000000201902070207SS&nsid=4",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": ["data", "core", "identity", "cluster", "members"],
              "query": [
                {
                  "key": "id",
                  "value": "100000000000000000000000201902070207SS"
                },
                {
                  "key": "nsid",
                  "value": "4"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Identity Service Email mapping",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a23b558f-bd67-4fa6-8984-57df74154b92",
                "type": "text/javascript",
                "exec": [
                  "var json = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"ACCESS_TOKEN\", json.ACCESS_TOKEN);"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-api-key",
                "value": "{{API_KEY}}"
              },
              {
                "key": "x-gw-ims-org-id",
                "value": "{{IMS_ORG}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "https://{{ADOBE_IO_HOST}}/data/core/identity/cluster/members?id=casper@yahoo.com&nsid=6",
              "protocol": "https",
              "host": ["{{ADOBE_IO_HOST}}"],
              "path": ["data", "core", "identity", "cluster", "members"],
              "query": [
                {
                  "key": "id",
                  "value": "casper@yahoo.com"
                },
                {
                  "key": "nsid",
                  "value": "6"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Get IMS Profile",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "a23b558f-bd67-4fa6-8984-57df74154b92",
            "type": "text/javascript",
            "exec": [
              "var json = JSON.parse(responseBody);",
              "postman.setEnvironmentVariable(\"ACCESS_TOKEN\", json.ACCESS_TOKEN);"
            ]
          }
        }
      ],
      "request": {
        "auth": {
          "type": "noauth"
        },
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": ""
        },
        "url": {
          "raw": "https://{{ADOBE_LOGIN_HOST}}/ims/token/v1?client_id={{API_KEY}}&client_secret={{IMS_CLIENT_SECRET}}&code={{IMS_CLIENT_CODE}}&grant_type=authorization_code",
          "protocol": "https",
          "host": ["{{ADOBE_LOGIN_HOST}}"],
          "path": ["ims", "token", "v1"],
          "query": [
            {
              "key": "client_id",
              "value": "{{API_KEY}}"
            },
            {
              "key": "client_secret",
              "value": "{{IMS_CLIENT_SECRET}}"
            },
            {
              "key": "code",
              "value": "{{IMS_CLIENT_CODE}}"
            },
            {
              "key": "grant_type",
              "value": "authorization_code"
            }
          ]
        }
      },
      "response": []
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{ACCESS_TOKEN}}",
        "type": "string"
      }
    ]
  }
}
